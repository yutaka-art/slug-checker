<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>GitHub åˆ©ç”¨å¯å¦ãƒã‚§ãƒƒã‚¯</title>
  <style>
    * {
      box-sizing: border-box;
    }
    
    body {
      font: 16px/1.6 system-ui, -apple-system, "Segoe UI", Roboto, "Hiragino Sans", "Noto Sans JP", sans-serif;
      padding: 24px;
      max-width: 720px;
      margin: 0 auto;
      background-color: #ffffff;
      color: #333333;
    }
    
    .card {
      border: 1px solid #ddd;
      border-radius: 12px;
      padding: 16px;
      margin: 16px 0;
      background-color: #ffffff;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
    
    .row {
      display: flex;
      gap: 8px;
      margin-top: 8px;
      flex-wrap: wrap;
    }
    
    input[type="text"] {
      flex: 1;
      min-width: 200px;
      padding: 10px;
      border: 1px solid #bbb;
      border-radius: 8px;
      font-size: 16px;
    }
    
    button {
      padding: 10px 14px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background: #24292f;
      color: #fff;
      font-size: 16px;
      transition: background-color 0.2s;
    }
    
    button:hover {
      background: #32383e;
    }
    
    button:disabled {
      background: #6c757d;
      cursor: not-allowed;
    }
    
    .muted {
      color: #666;
      font-size: 0.9em;
    }
    
    .ok {
      color: #067d00;
      font-weight: bold;
    }
    
    .ng {
      color: #b30000;
      font-weight: bold;
    }
    
    .note {
      background: #f6f8fa;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #e1e8ed;
    }
    
    h1 {
      color: #24292f;
      margin-bottom: 20px;
    }
    
    h2 {
      color: #24292f;
      margin-top: 0;
      margin-bottom: 10px;
    }
  </style>
</head>

<body>
  <h1>GitHub åˆ©ç”¨å¯å¦ãƒã‚§ãƒƒã‚¯</h1>

  <!-- GitHub ãƒ¦ãƒ¼ã‚¶ãƒ¼å -->
  <div class="card">
    <h2>GitHub ãƒ¦ãƒ¼ã‚¶ãƒ¼å</h2>
    <p class="muted">è‹±æ•°å­—ã¨ãƒã‚¤ãƒ•ãƒ³ï¼ˆå…ˆé ­/æœ«å°¾ãƒã‚¤ãƒ•ãƒ³ä¸å¯ã€æœ€å¤§39æ–‡å­—ï¼‰ã€‚</p>
    <div class="row">
      <input id="username" type="text" placeholder="ä¾‹: acme-dev" />
      <button id="btnUser">ãƒã‚§ãƒƒã‚¯</button>
    </div>
    <p id="userResult"></p>
  </div>

  <!-- Enterprise slugï¼ˆç´”é™çš„ï¼šç›®è¦–ç¢ºèªå°ç·šï¼‰ -->
  <div class="card">
    <h2>Enterprise slugï¼ˆå­˜åœ¨ç¢ºèªï¼‰</h2>
    <p class="note">
      ç´”é™çš„ãƒšãƒ¼ã‚¸ã‹ã‚‰ã¯ CORS åˆ¶ç´„ã«ã‚ˆã‚Šè‡ªå‹•åˆ¤å®šãŒã§ãã¾ã›ã‚“ã€‚<br/>
      ä¸‹ã®ãƒœã‚¿ãƒ³ã§ <code>https://github.com/enterprises/&lt;slug&gt;</code> ã‚’é–‹ãã€<b>404ï¼ˆNot Foundï¼‰</b> ã‹ã©ã†ã‹ã‚’ç›®è¦–ã§ç¢ºèªã—ã¦ãã ã•ã„ã€‚
    </p>
    <div class="row">
      <input id="slug" type="text" placeholder="ä¾‹: acme-enterprise" />
      <button id="btnSlugOpen">ãƒšãƒ¼ã‚¸ã‚’é–‹ã</button>
    </div>
    <p class="muted">â€» 404 â†’ æœªä½¿ç”¨ã®å¯èƒ½æ€§å¤§ã€‚ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹/ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã«èª˜å° â†’ ä½¿ç”¨ä¸­ã€‚</p>
  </div>

  <script>
    // ãƒ‡ãƒãƒƒã‚°ç”¨ï¼šãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿ç¢ºèª
    console.log('GitHub åˆ©ç”¨å¯å¦ãƒã‚§ãƒƒã‚¯ãƒšãƒ¼ã‚¸ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ');
    
    // DOMèª­ã¿è¾¼ã¿å®Œäº†ã‚’å¾…ã¤
    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOMèª­ã¿è¾¼ã¿å®Œäº†');
      
      // --- GitHub ãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒã‚§ãƒƒã‚¯ï¼ˆAPI, CORSå¯ï¼‰ ---
      const userInput = document.getElementById('username');
      const userBtn = document.getElementById('btnUser');
      const userResult = document.getElementById('userResult');
      
      // è¦ç´ ã®å­˜åœ¨ç¢ºèª
      if (!userInput || !userBtn || !userResult) {
        console.error('ãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒã‚§ãƒƒã‚¯ç”¨ã®è¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“:', {
          userInput: !!userInput,
          userBtn: !!userBtn,
          userResult: !!userResult
        });
        return;
      }
      
      console.log('ãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒã‚§ãƒƒã‚¯è¦ç´ ãŒæ­£å¸¸ã«å–å¾—ã•ã‚Œã¾ã—ãŸ');

      function isValidUsername(u) {
        // å…ˆé ­/æœ«å°¾ãƒã‚¤ãƒ•ãƒ³ä¸å¯ã€è‹±æ•°ãƒã‚¤ãƒ•ãƒ³ã€1-39 æ–‡å­—
        return /^[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,37}[a-zA-Z0-9])?$/.test(u);
      }

      userBtn.addEventListener('click', async function() {
        console.log('ãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒã‚§ãƒƒã‚¯ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ');
        const u = userInput.value.trim();
        userResult.textContent = '';
        
        if (!isValidUsername(u)) {
          userResult.innerHTML = '<span class="ng">å½¢å¼ã‚¨ãƒ©ãƒ¼:</span> è‹±æ•°å­—ã¨ãƒã‚¤ãƒ•ãƒ³ã®ã¿ï¼å…ˆé ­æœ«å°¾ãƒã‚¤ãƒ•ãƒ³ä¸å¯ï¼æœ€å¤§39æ–‡å­—';
          return;
        }
        
        userBtn.disabled = true; 
        userBtn.textContent = 'ãƒã‚§ãƒƒã‚¯ä¸­â€¦';
        
        try {
          console.log('GitHub APIã‚’å‘¼ã³å‡ºã—ä¸­:', u);
          const resp = await fetch(`https://api.github.com/users/${encodeURIComponent(u)}`, { method: 'GET' });
          
          if (resp.status === 200) {
            userResult.innerHTML = `ğŸ‘€ <span class="ng">åˆ©ç”¨ã§ãã¾ã›ã‚“</span>ï¼ˆæ—¢ã«å­˜åœ¨ï¼‰`;
          } else if (resp.status === 404) {
            userResult.innerHTML = `âœ… <span class="ok">åˆ©ç”¨ã§ãã¾ã™</span>ï¼ˆæœªå­˜åœ¨ã®å¯èƒ½æ€§ãŒé«˜ã„ï¼‰`;
          } else {
            userResult.innerHTML = `âš ï¸ ä¸æ˜ï¼ˆHTTP ${resp.status}ï¼‰ã€‚æ™‚é–“ã‚’ãŠã„ã¦å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚`;
          }
        } catch (e) {
          console.error('APIå‘¼ã³å‡ºã—ã‚¨ãƒ©ãƒ¼:', e);
          userResult.textContent = `é€šä¿¡ã‚¨ãƒ©ãƒ¼: ${e.message}`;
        } finally {
          userBtn.disabled = false; 
          userBtn.textContent = 'ãƒã‚§ãƒƒã‚¯';
        }
      });

      // --- Enterprise slugï¼šç´”é™çš„ã¯ç›®è¦–å°ç·šã®ã¿ï¼ˆCORSã®ãŸã‚ï¼‰ ---
      const slugInput = document.getElementById('slug');
      const slugBtn = document.getElementById('btnSlugOpen');
      
      // è¦ç´ ã®å­˜åœ¨ç¢ºèª
      if (!slugInput || !slugBtn) {
        console.error('Enterprise slugç”¨ã®è¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“:', {
          slugInput: !!slugInput,
          slugBtn: !!slugBtn
        });
        return;
      }
      
      console.log('Enterprise slugè¦ç´ ãŒæ­£å¸¸ã«å–å¾—ã•ã‚Œã¾ã—ãŸ');
      
      slugBtn.addEventListener('click', function() {
        console.log('Enterprise slugãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ');
        const s = slugInput.value.trim();
        if (!s) {
          console.log('slugå…¥åŠ›ãŒç©ºã§ã™');
          return;
        }
        const url = `https://github.com/enterprises/${encodeURIComponent(s)}`;
        console.log('Enterprise slugãƒšãƒ¼ã‚¸ã‚’é–‹ãã¾ã™:', url);
        window.open(url, '_blank', 'noopener,noreferrer');
      });
      
      console.log('ã™ã¹ã¦ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ãŒè¨­å®šã•ã‚Œã¾ã—ãŸ');
    });
  </script>
</body>
</html>
